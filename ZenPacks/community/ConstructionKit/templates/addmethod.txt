
    from Products.ZenUtils.Utils import prepId
    from %s.%s import %s
    import re
    cid = ''
    for k,v in kwargs.iteritems():
        if type(v) != bool:
            cid += str(v)
    cid = re.sub('[^A-Za-z0-9]+', '_', cid)
    id = prepId(cid)
    component = %s(id)
    relation = target.os.%s
    relation._setObject(component.id, component)
    component = relation._getOb(component.id)
    for k,v in kwargs.iteritems():
        setattr(component,k,v) 
    %s

